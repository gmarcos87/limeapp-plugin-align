'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.reducer = exports.initialState = undefined;

var _alignConstants = require('./alignConstants');

var initialState = exports.initialState = {
  ifaces: [],
  stations: [],
  currentReading: {}
};

var reducer = exports.reducer = function reducer() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var _ref = arguments[1];
  var type = _ref.type,
      payload = _ref.payload,
      meta = _ref.meta;

  switch (type) {

    case _alignConstants.IFACES_LOAD_SUCCESS:
      return Object.assign({}, state, { ifaces: payload });

    case _alignConstants.STATIONS_LOAD_SUCCESS:
      return Object.assign({}, state, { stations: payload });

    case _alignConstants.STATION_SET:
      return Object.assign({}, state, { currentReading: payload });

    case _alignConstants.IFACE_SET:
      return Object.assign({}, state, { stations: state.stations.filter(function (x) {
          return x.iface === payload;
        }) });

    case _alignConstants.SIGNAL_GET_SUCCESS:
      if (state.currentReading.mac === payload.station) {
        var newCurrentReading = Object.assign({}, state.currentReading, { signal: payload.signal });
        var newStations = state.stations.map(function (station) {
          if (station.mac === payload.station) {
            station.signal = payload.signal;
          }
          return station;
        });
        return Object.assign({}, state, { currentReading: newCurrentReading, stations: newStations });
      }
      return state;

    default:
      return state;
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9hbGlnblJlZHVjZXIuanMiXSwibmFtZXMiOlsiaW5pdGlhbFN0YXRlIiwiaWZhY2VzIiwic3RhdGlvbnMiLCJjdXJyZW50UmVhZGluZyIsInJlZHVjZXIiLCJzdGF0ZSIsInR5cGUiLCJwYXlsb2FkIiwibWV0YSIsIk9iamVjdCIsImFzc2lnbiIsImZpbHRlciIsIngiLCJpZmFjZSIsIm1hYyIsInN0YXRpb24iLCJuZXdDdXJyZW50UmVhZGluZyIsInNpZ25hbCIsIm5ld1N0YXRpb25zIiwibWFwIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBUU8sSUFBTUEsc0NBQWU7QUFDMUJDLFVBQVEsRUFEa0I7QUFFMUJDLFlBQVUsRUFGZ0I7QUFHMUJDLGtCQUFnQjtBQUhVLENBQXJCOztBQU1BLElBQU1DLDRCQUFVLFNBQVZBLE9BQVUsR0FBbUQ7QUFBQSxNQUFsREMsS0FBa0QsdUVBQTFDTCxZQUEwQztBQUFBO0FBQUEsTUFBMUJNLElBQTBCLFFBQTFCQSxJQUEwQjtBQUFBLE1BQXBCQyxPQUFvQixRQUFwQkEsT0FBb0I7QUFBQSxNQUFYQyxJQUFXLFFBQVhBLElBQVc7O0FBQ3hFLFVBQVFGLElBQVI7O0FBRUU7QUFDRSxhQUFPRyxPQUFPQyxNQUFQLENBQWMsRUFBZCxFQUFrQkwsS0FBbEIsRUFBeUIsRUFBQ0osUUFBUU0sT0FBVCxFQUF6QixDQUFQOztBQUVGO0FBQ0UsYUFBT0UsT0FBT0MsTUFBUCxDQUFjLEVBQWQsRUFBa0JMLEtBQWxCLEVBQXlCLEVBQUNILFVBQVVLLE9BQVgsRUFBekIsQ0FBUDs7QUFFRjtBQUNFLGFBQU9FLE9BQU9DLE1BQVAsQ0FBYyxFQUFkLEVBQWtCTCxLQUFsQixFQUF5QixFQUFDRixnQkFBZ0JJLE9BQWpCLEVBQXpCLENBQVA7O0FBRUY7QUFDRSxhQUFPRSxPQUFPQyxNQUFQLENBQWMsRUFBZCxFQUFrQkwsS0FBbEIsRUFBeUIsRUFBQ0gsVUFBVUcsTUFBTUgsUUFBTixDQUFlUyxNQUFmLENBQXNCO0FBQUEsaUJBQUtDLEVBQUVDLEtBQUYsS0FBWU4sT0FBakI7QUFBQSxTQUF0QixDQUFYLEVBQXpCLENBQVA7O0FBRUY7QUFDRSxVQUFJRixNQUFNRixjQUFOLENBQXFCVyxHQUFyQixLQUE2QlAsUUFBUVEsT0FBekMsRUFBa0Q7QUFDaEQsWUFBSUMsb0JBQW9CUCxPQUFPQyxNQUFQLENBQWMsRUFBZCxFQUFrQkwsTUFBTUYsY0FBeEIsRUFBd0MsRUFBQ2MsUUFBUVYsUUFBUVUsTUFBakIsRUFBeEMsQ0FBeEI7QUFDQSxZQUFJQyxjQUFjYixNQUFNSCxRQUFOLENBQWVpQixHQUFmLENBQW1CLG1CQUFXO0FBQzlDLGNBQUlKLFFBQVFELEdBQVIsS0FBZ0JQLFFBQVFRLE9BQTVCLEVBQXFDO0FBQ25DQSxvQkFBUUUsTUFBUixHQUFpQlYsUUFBUVUsTUFBekI7QUFDRDtBQUNELGlCQUFPRixPQUFQO0FBQ0QsU0FMaUIsQ0FBbEI7QUFNQSxlQUFPTixPQUFPQyxNQUFQLENBQWMsRUFBZCxFQUFrQkwsS0FBbEIsRUFBeUIsRUFBQ0YsZ0JBQWdCYSxpQkFBakIsRUFBcUNkLFVBQVNnQixXQUE5QyxFQUF6QixDQUFQO0FBQ0Q7QUFDRCxhQUFPYixLQUFQOztBQUVGO0FBQ0UsYUFBT0EsS0FBUDtBQTVCSjtBQThCRCxDQS9CTSIsImZpbGUiOiJhbGlnblJlZHVjZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBJRkFDRVNfTE9BRF9TVUNDRVNTLFxuICBTVEFUSU9OU19MT0FEX1NVQ0NFU1MsXG4gIFNUQVRJT05fU0VULFxuICBJRkFDRV9TRVQsXG4gIFNJR05BTF9HRVRfU1VDQ0VTU1xufSBmcm9tICcuL2FsaWduQ29uc3RhbnRzJztcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxTdGF0ZSA9IHtcbiAgaWZhY2VzOiBbXSxcbiAgc3RhdGlvbnM6IFtdLFxuICBjdXJyZW50UmVhZGluZzoge31cbn07XG5cbmV4cG9ydCBjb25zdCByZWR1Y2VyID0gKHN0YXRlID0gaW5pdGlhbFN0YXRlLCB7IHR5cGUsIHBheWxvYWQsIG1ldGEgfSkgPT4ge1xuICBzd2l0Y2ggKHR5cGUpIHtcblxuICAgIGNhc2UgSUZBQ0VTX0xPQURfU1VDQ0VTUzpcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwge2lmYWNlczogcGF5bG9hZH0pO1xuXG4gICAgY2FzZSBTVEFUSU9OU19MT0FEX1NVQ0NFU1M6XG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUsIHtzdGF0aW9uczogcGF5bG9hZCB9KTtcblxuICAgIGNhc2UgU1RBVElPTl9TRVQ6XG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUsIHtjdXJyZW50UmVhZGluZzogcGF5bG9hZH0pO1xuXG4gICAgY2FzZSBJRkFDRV9TRVQ6XG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUsIHtzdGF0aW9uczogc3RhdGUuc3RhdGlvbnMuZmlsdGVyKHggPT4geC5pZmFjZSA9PT0gcGF5bG9hZCl9KTtcblxuICAgIGNhc2UgU0lHTkFMX0dFVF9TVUNDRVNTOlxuICAgICAgaWYgKHN0YXRlLmN1cnJlbnRSZWFkaW5nLm1hYyA9PT0gcGF5bG9hZC5zdGF0aW9uKSB7XG4gICAgICAgIGxldCBuZXdDdXJyZW50UmVhZGluZyA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLmN1cnJlbnRSZWFkaW5nLCB7c2lnbmFsOiBwYXlsb2FkLnNpZ25hbH0pO1xuICAgICAgICBsZXQgbmV3U3RhdGlvbnMgPSBzdGF0ZS5zdGF0aW9ucy5tYXAoc3RhdGlvbiA9PiB7XG4gICAgICAgICAgaWYgKHN0YXRpb24ubWFjID09PSBwYXlsb2FkLnN0YXRpb24pIHtcbiAgICAgICAgICAgIHN0YXRpb24uc2lnbmFsID0gcGF5bG9hZC5zaWduYWw7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzdGF0aW9uO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLCB7Y3VycmVudFJlYWRpbmc6IG5ld0N1cnJlbnRSZWFkaW5nLCAgc3RhdGlvbnM6bmV3U3RhdGlvbnN9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgIFxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn07XG4iXX0=